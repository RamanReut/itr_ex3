{"version":3,"sources":["components/lightTextField/lightTextField.js","components/textFieldWithButton/textFieldWithButton.js","components/labelWithEditButton/labelWithEditButton.js","components/username/username.js","components/roundedBox/roundedBox.js","components/messageBox/messageBox.js","components/messageMenu/messageMenu.js","components/message/message.js","components/messageList/messageList.js","components/messageInput/messageInput.js","services/chat.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","lightTextField","color","palette","secondary","contrastText","LightTextField","value","onChange","styles","TextField","variant","className","size","lightButton","primary","TextFieldWithButton","onButtonClick","buttonText","mainXS","Grid","container","justify","alignItems","spacing","item","xs","Button","onClick","fullWidth","label","typography","h4","icon","LabelWithEditButton","IconButton","ChooseWidget","props","type","console","error","Username","username","AppBar","position","Container","box","borderRadius","RoundedBox","children","Box","classNames","message","paddingBottom","userMessage","backgroundColor","otherMessage","MessageBox","MessageMenu","anchorEl","onClose","onDelete","onEdit","Menu","open","Boolean","MenuItem","converter","showdown","Converter","main","marginBottom","marginTop","Component","Item","onMessageEdit","onMessageDelete","useState","setAnchorEl","handleContextMenu","useCallback","event","currentTarget","preventDefault","handleMenuClose","onContextMenu","direction","parser","makeHtml","user","other","MessageList","usernames","userID","messages","wrap","Object","keys","sort","a","b","map","key","authorID","authorUserID","messageType","text","textArea","height","preview","MessageInput","selectedTab","useSelectedTab","classes","onTabChange","generateMarkdownPreview","markdown","Promise","resolve","minPreviewHeight","maxEditorHeight","minEditorHeight","textAreaProps","autoFocus","socket","__handleNewMessage","__handleNewUser","__handleDeleteMessage","this","socketIO","connect","on","handleNewMessage","bind","handleNewUser","handleDeleteMessage","callback","messageID","authorUsername","id","fetch","then","response","ok","json","emit","root","overflow","messageListWrapper","flexGrow","overflowY","overflowX","fullHeight","gridWrapper","boxShadow","shadows","App","setUsername","setMessage","setMessages","setUsernames","usernameWidgetType","setUsernameWidgetType","setMessageID","setUserID","useRef","handleSetUserID","cookies","set","expires","applyUsername","current","changeUsername","onEditButtonClick","onUsernameButtonClick","handleMessageEdit","handleMessageDelete","deleteMessage","onNewUser","handleSendMessage","sendMessage","newMessages","onNewMessage","useEffect","chat","get","requestUserID","requestInitData","subscribeNewUsers","subscribeNewMessage","subscribeDeleteMessage","maxWidth","target","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.b940f9f9.chunk.js","sourcesContent":["import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    lightTextField: {\n        '& input': {\n            color: theme.palette.secondary.contrastText,\n        }\n    },\n}));\n\nexport default function LightTextField({\n    value,\n    onChange,\n}) {\n    const styles = useStyles();\n\n    return (\n        <TextField \n            variant='filled'\n            className={styles.lightTextField}\n            color='secondary'\n            onChange={onChange}\n            value={value}\n            size='medium'\n        />\n    )\n}","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport LightTextField from '../lightTextField/lightTextField';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    lightButton: {\n        color: theme.palette.primary.contrastText,\n    }\n}));\n\nexport default function TextFieldWithButton({\n    onChange,\n    onButtonClick,\n    value,\n    buttonText,\n    mainXS = 3\n}) {\n    const styles = useStyles();\n\n    return (\n        <Grid \n            container\n            justify='flex-start'\n            alignItems='center'\n            spacing={0}\n        >\n            <Grid item xs={mainXS}>\n                <LightTextField \n                    value={value}\n                    onChange={onChange}\n                />\n            </Grid>\n            <Grid item xs={1}>\n                <Button \n                    className={styles.lightButton}\n                    onClick={onButtonClick}\n                    fullWidth\n                >{buttonText}</Button>\n            </Grid>\n        </Grid>\n    )\n}","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    label: {\n        ...theme.typography.h4,\n        color: theme.palette.primary.contrastText,\n    },\n    icon: {\n        color: theme.palette.primary.contrastText,\n    }\n}));\n\nexport default function LabelWithEditButton({\n    value,\n    onButtonClick,\n    mainXS = 3,\n}) {\n    const styles = useStyles();\n\n    return (\n        <Grid \n            container\n            justify='flex-start'\n            alignItems='center'\n            spacing={0}\n        >\n            <Grid\n                container\n                item \n                xs={mainXS}\n                justify='flex-start'\n                alignItems='center'\n            >\n                <div className={styles.label}>{value}</div>\n            </Grid>\n            <Grid item xs={1}>\n                <IconButton \n                    className={styles.icon}\n                    onClick={onButtonClick}\n                >\n                    <EditIcon />\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport TextFieldWithButton from '../textFieldWithButton/textFieldWithButton';\nimport LabelWithEditButton from '../labelWithEditButton/labelWithEditButton';\nimport Container from '@material-ui/core/Container';\n\nfunction ChooseWidget(props) {\n    switch (props.type) {\n        default:\n            console.error('Wrong widget type ' + props.type);\n            break;\n        case 'label':\n            return <LabelWithEditButton {...props} />\n        case 'edit':\n            return <TextFieldWithButton {...props} />\n    }\n}\n\nexport default function Username({\n    username,\n    onChange,\n    onButtonClick,\n    type,\n}) {\n    return (\n        <AppBar position='static'>\n            <Container>\n                <ChooseWidget\n                    onChange={onChange}\n                    value={username}\n                    buttonText='apply'\n                    type={type}\n                    onButtonClick={onButtonClick}\n                    mainXS={3}\n                />\n            </Container>\n        </AppBar>\n    )\n}","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles({\n    box: {\n        borderRadius: '5px'\n    }\n})\n\nexport default function RoundedBox({\n    children,\n    className,\n}) {\n    const styles = useStyles();\n\n    return (\n        <Box className={classNames(className, styles.box)}>\n            {children}\n        </Box>\n    )\n}","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport RoundedBox from '../roundedBox/roundedBox';\nimport Container from '@material-ui/core/Container';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles({\n    message: {\n        paddingBottom: '0.2em',\n    },\n    userMessage: {\n        backgroundColor: '#e8e8e8',\n    },\n    otherMessage: {\n        backgroundColor: '#b5ceff',\n    }\n});\n\nexport default function MessageBox({\n    children,\n    type,\n\n}) {\n    const styles = useStyles();\n\n    return (\n        <Grid \n            container\n        >\n            <Grid item>\n                <RoundedBox className={classNames(styles[type+'Message'], styles.message)}>\n                    <Container>\n                        {children}\n                    </Container>\n                </RoundedBox>\n            </Grid>\n        </Grid>\n    )\n}","import React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nexport default function MessageMenu({\n    anchorEl,\n    onClose,\n    onDelete,\n    onEdit,\n}) {\n    return (\n        <Menu\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={onClose}\n        >\n            <MenuItem onClick={() => {onEdit();onClose();}}>Edit</MenuItem>\n            <MenuItem onClick={() => {onDelete(); onClose();}}>Delete</MenuItem>\n        </Menu>\n    );\n}","import React, { useState, useCallback } from 'react';\nimport MessageBox from '../messageBox/messageBox';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Menu from '../messageMenu/messageMenu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport showdown from 'showdown';\nimport parser from 'html-react-parser';\n\nconst converter = new showdown.Converter();\n\nconst useStyles = makeStyles((theme) => ({\n    label: {\n        color: theme.palette.primary.main,\n        marginBottom: '0.4em',\n    },\n    message: {\n        '& p': {\n            marginTop: '0.1em',\n            marginBottom: '0.1em',\n        },\n    },\n}));\n\nexport default function Message({\n    type,\n    message,\n    username,\n    onMessageEdit,\n    onMessageDelete,\n}) {\n    const styles = useStyles();\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    const handleContextMenu = useCallback((event) => {\n        if (type === 'user') {\n            setAnchorEl(event.currentTarget);\n        }\n        event.preventDefault();\n    }, [type]);\n    const handleMenuClose = useCallback(() => {\n        setAnchorEl(null);\n    }, []);\n\n    return (\n        <Box onContextMenu={handleContextMenu}>\n            <MessageBox\n                type={type}\n            >\n                <Grid\n                    container\n                    direction='column'\n                    alignItems='flex-start'\n                >\n                    <Grid item>\n                        <div className={styles.label}>{username}</div>\n                    </Grid>\n                    <Grid\n                        item\n                        className={styles.message}\n                    >\n                        <div>{parser(converter.makeHtml(message))}</div>\n                    </Grid>\n                </Grid>\n            </MessageBox>\n            <Menu\n                anchorEl={anchorEl}\n                onDelete={onMessageDelete}\n                onEdit={onMessageEdit}\n                onClose={handleMenuClose}\n            />\n        </Box>\n    )\n}","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Message from '../message/message';\n\nfunction withGridItem(Component) {\n    return function (props) {\n        const justify = ({ user: 'flex-end', other: 'flex-start' })[props.type];\n\n        return (\n            <Grid\n                item\n                xs={12}\n            >\n                <Grid\n                    container\n                    direction='row'\n                    justify={justify}\n                >\n                    <Grid\n                        item\n                        xs={6}\n                    >\n                        <Grid\n                            container\n                            direction='row'\n                            justify={justify}\n                        >\n                            <Grid item>\n                                <Component {...props} />\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Grid>\n        )\n    }\n}\nconst Item = withGridItem(Message);\n\nexport default function MessageList({\n    usernames,\n    userID,\n    messages,\n    onMessageEdit,\n    onMessageDelete,\n}) {\n    const generateItem = (key) => {\n        const authorID = messages[key].authorUserID\n        const messageType = (userID == authorID) ? 'user' : 'other';\n\n        return <Item\n            key={key}\n            type={messageType}\n            message={messages[key].text}\n            username={usernames[authorID]}\n            onMessageEdit={() => onMessageEdit(key)}\n            onMessageDelete={() => onMessageDelete(key)}\n        />\n    }\n\n    return (\n        <Grid\n            container\n            spacing={1}\n            direction='column'\n            wrap='nowrap'\n        >\n            {Object.keys(messages).sort((a, b) => a-b).map(generateItem)}\n        </Grid>\n    )\n}","import React, { useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\nimport ReactMde from 'react-mde';\nimport \"react-mde/lib/styles/css/react-mde-all.css\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport showdown from 'showdown'\n\nconst converter = new showdown.Converter();\n\nconst useStyles = makeStyles({\n    textArea: {\n        height: '100px',\n    },\n    preview: {\n        height: '100px',\n    },\n});\n\nexport default function MessageInput({\n    message,\n    onClick,\n    onChange,\n}) {\n    var styles = useStyles();\n    var [ selectedTab, useSelectedTab ] = useState('write');\n\n    return (\n        <Grid\n            container\n            alignItems='center'\n        >\n            <Grid item xs={11}>\n                <ReactMde \n                    value={message}\n                    onChange={onChange}\n                    classes={styles}\n                    selectedTab={selectedTab}\n                    onTabChange={useSelectedTab}\n                    generateMarkdownPreview={markdown => {\n                        return Promise.resolve(converter.makeHtml(markdown));\n                    }}\n                    minPreviewHeight={100}\n                    maxEditorHeight={200}\n                    minEditorHeight={100}\n                    textAreaProps={{autoFocus: true}}\n                />\n            </Grid>\n            <Grid item xs>\n                <IconButton\n                    color='primary'\n                    onClick={onClick}\n                >\n                    <SendIcon />\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}","import socketIO from 'socket.io-client';\n\nexport default class socket {\n    socket = {};\n    __handleNewMessage = () => {};\n    __handleNewUser = () => {};\n    __handleDeleteMessage = () => {};\n\n    constructor () {\n        this.socket = socketIO.connect('/');\n        this.socket.on('message', this.handleNewMessage.bind(this));\n        this.socket.on('user', this.handleNewUser.bind(this));\n        this.socket.on('delete message', this.handleDeleteMessage.bind(this));\n    }\n\n    subscribeNewMessage(callback = function(messageID, text) {}) {\n        this.__handleNewMessage = callback;\n    }\n\n    subscribeNewUsers(callback = function(userID, username){}) {\n        this.__handleNewUser = callback;\n    }\n\n    subscribeDeleteMessage(callback = function(messageID) {}) {\n        this.__handleDeleteMessage = callback;\n    }\n\n    handleNewMessage({ messageID, authorID, text, authorUsername }) {\n        this.__handleNewMessage(messageID, authorID, text, authorUsername);\n    }\n\n    handleNewUser({ id, username }) {\n        this.__handleNewUser(id, username);\n    }\n\n    handleDeleteMessage({ id }) {\n        this.__handleDeleteMessage(id);\n    }\n\n    requestUserID(callback = function() {}) {\n        fetch('/api/newUserID').then(response => {\n            if(response.ok) {\n                response.json().then(value => {\n                    callback(value.id);\n                })\n            }\n        });\n    }\n\n    requestInitData(callback = function(messages, usernames){}) {\n        fetch('/api/initData').then((response) => {\n            if(response.ok) {\n                response.json().then(value => {\n                    callback(value.messages, value.usernames);\n                })\n            }\n        });\n    }\n\n    sendMessage(userID, messageID, message) {\n        this.socket.emit('message', {\n            userID: userID,\n            messageID: messageID, \n            message: message,\n        });\n    }\n\n    deleteMessage(id, userID) {\n        this.socket.emit('delete message', {\n            messageID: id,\n            userID: userID,\n        });\n    }\n\n    changeUsername(id, username) {\n        this.socket.emit('username', {\n            id: id,\n            username: username,\n        })\n    }\n}","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport Username from './components/username/username';\nimport MessageList from './components/messageList/messageList';\nimport MessageInput from './components/messageInput/messageInput';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport chat from './services/chat';\nimport cookies from 'js-cookie';\nimport './App.css';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100vh',\n        overflow: 'hidden',\n    },\n    messageListWrapper: {\n        flexGrow: 1,\n        overflowY: 'auto',\n        overflowX: 'hidden',\n        marginTop: theme.spacing(),\n        marginBottom: theme.spacing()\n    },\n    fullHeight: {\n        height: '100%',\n    },\n    gridWrapper: {\n        boxShadow: theme.shadows[4]\n    },\n\n}));\n\nfunction App() {\n    const styles = useStyles();\n\n    const [username, setUsername] = useState('');\n    const [message, setMessage] = useState('');\n    const [messages, setMessages] = useState([]);\n    const [usernames, setUsernames] = useState({});\n    const [usernameWidgetType, setUsernameWidgetType] = useState('label');\n    const [messageID, setMessageID] = useState('new');\n    const [userID, setUserID] = useState(0);\n    const socket = useRef();\n\n    const handleSetUserID = useCallback((id) => {\n        setUserID(id);\n        cookies.set('userID', id, { expires: 90 });\n    }, [])\n\n    const applyUsername = useCallback(\n        () => {\n            usernames[userID] = username;\n            setUsernameWidgetType('label');\n            socket.current.changeUsername(userID, username);\n        }, [usernames, userID, username]\n    );\n\n    const onEditButtonClick = useCallback(\n        () => {\n            setUsernameWidgetType('edit');\n        }, [setUsernameWidgetType]\n    );\n\n    const onUsernameButtonClick = useCallback(\n        (event) => {\n            if (usernameWidgetType === 'edit') {\n                return applyUsername(event)\n            }\n            return onEditButtonClick(event)\n        }, [applyUsername, onEditButtonClick, usernameWidgetType]\n    );\n\n    const handleMessageEdit = useCallback((id) => {\n        setMessage(messages[id].text);\n        setMessageID(id);\n    }, [messages]);\n\n    const handleMessageDelete = useCallback((id) => {\n        socket.current.deleteMessage(id, userID);\n    }, [userID]);\n\n    const onNewUser = useCallback((id, username) => {\n        setUsernames({ ...usernames, [id]: username });\n    }, [usernames]);\n\n    const handleSendMessage = useCallback(() => {\n        socket.current.sendMessage(userID, messageID, message);\n        setMessage('');\n        setMessageID('new');\n    }, [userID, messageID, message]);\n\n    const onMessageDelete = useCallback((id) => {\n        let {[id]: _, ...newMessages} = messages;\n        setMessages(newMessages);\n    }, [messages]);\n\n    const onNewMessage = useCallback((messageID, authorID, text, username) => {\n        setMessages({ \n            ...messages, \n            [messageID]: {\n                authorUserID: authorID,\n                text: text,\n            }});\n        setUsernames({...usernames, [authorID]: username})\n    }, [messages, usernames]);\n\n    useEffect(() => {\n        socket.current = new chat();\n    }, []);\n\n    useEffect(() => {\n        const id = cookies.get('userID');\n        if (!id) {\n            socket.current.requestUserID(handleSetUserID);\n            setUsername('Anonimus');\n        } else {\n            setUserID(id);\n            setUsername(usernames[id]);\n        }\n    }, [handleSetUserID, usernames]);\n\n    useEffect(() => {\n        setUsername(usernames[userID]);\n    }, [usernames, userID]);\n\n    useEffect(() => {\n        socket.current.requestInitData((messages, usernames) => {\n            setMessages(messages);\n            setUsernames(usernames);\n        })\n    }, [])\n\n    useEffect(() => {\n        socket.current.subscribeNewUsers(onNewUser);\n        socket.current.subscribeNewMessage(onNewMessage);\n        socket.current.subscribeDeleteMessage(onMessageDelete);\n    }, [onNewUser, onNewMessage, onMessageDelete]);\n\n    return (\n        <div className={classNames(\"App\", styles.root)}>\n            <Container\n                className={classNames(styles.fullHeight)}\n                maxWidth='md'\n            >\n                <Box className={classNames(styles.fullHeight, styles.gridWrapper)}>\n                    <Grid\n                        container\n                        direction='column'\n                        className={styles.fullHeight}\n                        wrap='nowrap'\n                        spacing={0}\n                    >\n                        <Grid item>\n                            <Username\n                                username={username}\n                                type={usernameWidgetType}\n                                onChange={event => setUsername(event.target.value)}\n                                onButtonClick={onUsernameButtonClick}\n                            />\n                        </Grid>\n                        <Grid\n                            item\n                            className={styles.messageListWrapper}\n                            xs={12}\n                            container\n                            direction='column-reverse'\n                        >\n                            <Container>\n                                <MessageList\n                                    messages={messages}\n                                    usernames={usernames}\n                                    userID={userID}\n                                    onMessageDelete={handleMessageDelete}\n                                    onMessageEdit={handleMessageEdit}\n                                />\n                            </Container>\n                        </Grid>\n                        <Grid item>\n                            <Container>\n                                <MessageInput\n                                    message={message}\n                                    onChange={setMessage}\n                                    onClick={handleSendMessage}\n                                />\n                            </Container>\n                        </Grid>\n                    </Grid>\n                </Box>\n            </Container>\n        </div>\n    );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}